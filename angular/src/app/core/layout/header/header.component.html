<nav class="bg-indigo-700 z-50" (clickOutside)="isMenuExpanded = false">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <img
            class="w-12 cursor-pointer outline-none"
            src="/assets/oz-logo.png"
            alt="logo"
            [routerLink]="'/dashboard'" />
        </div>
        <div class="hidden md:block">
          <div class="ml-10 flex items-baseline">
            <a
              [routerLinkActive]="'active-link'"
              [routerLink]="'/dashboard'"
              class="text-sm link"
              >Dashboard
            </a>
            <ng-container *ngIf="company?.id !== 'all'">
              <!-- Projects -->
              <!--              <a [routerLinkActive]="'active-link'"
                               [routerLink]="'/' + company.id + '/projects'"
                               class="ml-4 text-sm link">Projects
                            </a>-->
              <!-- Business -->
              <div
                *ngIf="userRole !== 5"
                (click)="isBusinessExpanded = !isBusinessExpanded"
                (clickOutside)="this.isBusinessExpanded = false"
                class="ml-4 text-sm link relative">
                <!-- Item active: "text-gray-900", Item inactive: "text-gray-500" -->
                <button
                  class="group inline-flex items-center space-x-2 leading-6 font-medium focus:outline-none transition ease-in-out duration-150"
                  type="button">
                  <span>Business </span>
                  <!-- Item active: "text-gray-600", Item inactive: "text-gray-400" -->
                  <svg
                    class="h-5 w-5 transition ease-in-out duration-150"
                    fill="currentColor"
                    viewBox="0 0 20 20">
                    <path
                      clip-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      fill-rule="evenodd" />
                  </svg>
                </button>

                <!--
                  Flyout menu, show/hide based on flyout menu state.

                  Entering: "transition ease-out duration-200"
                    From: "opacity-0 translate-y-1"
                    To: "opacity-100 translate-y-0"
                  Leaving: "transition ease-in duration-150"
                    From: "opacity-100 translate-y-0"
                    To: "opacity-0 translate-y-1"
                -->
                <!-- above implemented in angular browser animation -->
                <div
                  *ngIf="isBusinessExpanded"
                  [@navAnimation]
                  class="absolute left-1/2 transform -translate-x-1/2 mt-3 px-2 w-screen max-w-md sm:px-0 z-50">
                  <div class="rounded-lg shadow-lg">
                    <div class="rounded-lg shadow-xs overflow-hidden">
                      <div
                        class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
                        <a
                          [routerLink]="['/' + company.id + '/quotes']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              clip-rule="evenodd"
                              d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z"
                              fill-rule="evenodd"></path>
                            <path
                              d="M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Quotes
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              Create, amend, and update client quote details.
                            </p>
                          </div>
                        </a>

                        <a
                          [routerLink]="['/' + company.id + '/orders']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Orders
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View and edit client orders and quotes.
                            </p>
                          </div>
                        </a>

                        <a
                          [routerLink]="['/' + company.id + '/invoices']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>
                            <path
                              clip-rule="evenodd"
                              d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z"
                              fill-rule="evenodd"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Invoices
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              Create, edit, and view client invoices.
                            </p>
                          </div>
                        </a>

                        <a
                          *ngIf="userRole !== 3"
                          [routerLink]="['/' + company.id + '/purchase_orders']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              clip-rule="evenodd"
                              d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z"
                              fill-rule="evenodd"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Purchase Orders
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View and edit POs.
                            </p>
                          </div>
                        </a>

                        <a
                          *ngIf="userRole !== 5"
                          [routerLink]="[
                            '/' + company.id + '/resource_invoices'
                          ]"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>
                            <path
                              clip-rule="evenodd"
                              d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z"
                              fill-rule="evenodd"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Resource Invoices
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View resource invoices and their related orders.
                            </p>
                          </div>
                        </a>
                        <a
                          *ngIf="
                            userRole !== 3 && userRole !== 5 && userRole !== 6
                          "
                          [routerLink]="[
                            '/' + company.id + '/employees/active'
                          ]"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              clip-rule="evenodd"
                              d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"
                              fill-rule="evenodd"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Assign Employees
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              Assign employees on orders.
                            </p>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Contacts -->
              <div
                (click)="isContactsExpanded = !isContactsExpanded"
                (clickOutside)="this.isContactsExpanded = false"
                class="ml-4 text-sm link relative">
                <!-- Item active: "text-gray-900", Item inactive: "text-gray-500" -->
                <button
                  class="group inline-flex items-center space-x-2 leading-6 font-medium focus:outline-none transition ease-in-out duration-150"
                  type="button">
                  <span>Contacts </span>
                  <!-- Item active: "text-gray-600", Item inactive: "text-gray-400" -->
                  <svg
                    class="h-5 w-5 transition ease-in-out duration-150"
                    fill="currentColor"
                    viewBox="0 0 20 20">
                    <path
                      clip-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      fill-rule="evenodd" />
                  </svg>
                </button>

                <!--
                  Flyout menu, show/hide based on flyout menu state.

                  Entering: "transition ease-out duration-200"
                    From: "opacity-0 translate-y-1"
                    To: "opacity-100 translate-y-0"
                  Leaving: "transition ease-in duration-150"
                    From: "opacity-100 translate-y-0"
                    To: "opacity-0 translate-y-1"
                -->
                <!-- above implemented in angular browser animation -->
                <div
                  *ngIf="isContactsExpanded"
                  [@navAnimation]
                  class="absolute left-1/2 transform -translate-x-1/2 mt-3 px-2 w-screen max-w-md sm:px-0 z-50">
                  <div class="rounded-lg shadow-lg">
                    <div class="rounded-lg shadow-xs overflow-hidden">
                      <div
                        class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
                        <a
                          *ngIf="
                            userRole !== 4 && userRole !== 5 && userRole !== 7
                          "
                          [routerLink]="['/' + company.id + '/customers']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 24 24">
                            <path
                              d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2" />
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Customers
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View, edit, and create customer details.
                            </p>
                          </div>
                        </a>
                        <a
                          *ngIf="
                            userRole !== 4 && userRole !== 5 && userRole !== 7
                          "
                          [routerLink]="['/' + company.id + '/contacts']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 24 24">
                            <path
                              d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2" />
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Contacts
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View, amend, and create contact details for their
                              related customer.
                            </p>
                          </div>
                        </a>
                        <a
                          *ngIf="userRole !== 3"
                          [routerLink]="['/' + company.id + '/resources']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Resources
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View, create, and edit contact information for
                              resources such as suppliers and freelancers.
                            </p>
                          </div>
                        </a>
                        <!-- TODO: refactor here and in similar places above and below-->
                        <a
                          *ngIf="userRole !== 3 && userRole !== 7"
                          [routerLink]="['/' + company.id + '/employees']"
                          class="-m-3 p-3 flex items-start space-x-4 rounded-lg hover:bg-gray-50 transition ease-in-out duration-150">
                          <svg
                            class="flex-shrink-0 h-6 w-6 text-indigo-600"
                            fill="currentColor"
                            viewBox="0 0 20 20">
                            <path
                              d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path>
                          </svg>
                          <div class="space-y-1">
                            <p
                              class="text-base leading-6 font-medium text-gray-900">
                              Employees
                            </p>
                            <p class="text-sm leading-5 text-gray-500">
                              View, amend, and create employee details.
                            </p>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="hidden md:block">
        <div class="ml-4 flex items-center md:ml-6">
          <!-- Profile dropdown -->
          <div
            (clickOutside)="this.isProfileExpanded = false"
            class="ml-3 relative">
            <div>
              <button
                (click)="isProfileExpanded = !isProfileExpanded"
                [ngClass]="{ 'shadow-solid': isProfileExpanded }"
                [style.background]="companyAvatarColor"
                aria-haspopup="true"
                aria-label="Company menu"
                class="flex items-center px-3 py-1 text-sm rounded-full text-white focus:outline-none hover:shadow-solid"
                id="company-menu">
                {{ company.name }}
              </button>
            </div>
            <!--
              Profile dropdown panel, show/hide based on dropdown state.

              Entering: "transition ease-out duration-100"
                From: "transform opacity-0 scale-95"
                To: "transform opacity-100 scale-100"
              Leaving: "transition ease-in duration-75"
                From: "transform opacity-100 scale-100"
                To: "transform opacity-0 scale-95"
            -->
            <div
              (click)="isProfileExpanded = false"
              *ngIf="isProfileExpanded"
              [@profileAnimation]
              class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg z-50">
              <div class="py-1 rounded-md bg-white shadow-xs">
                <!-- List of companies -->
                <ng-container *ngIf="user?.companies.length > 1">
                  <label class="block px-4 py-2 text-sm text-gray-400"
                    >Companies</label
                  >
                  <div class="border-b border-gray-100">
                    <a
                      (click)="
                        comp.id !== company.id ? updateCompany(comp) : undefined
                      "
                      *ngFor="let comp of companies"
                      [class.bg-gray-100]="comp.id === company.id"
                      [class.cursor-pointer]="comp.id !== company.id"
                      class="block pl-8 pr-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer">
                      {{ comp.name }}
                    </a>
                  </div>
                </ng-container>

                <a
                  *ngIf="showSettings"
                  [routerLink]="['/' + company.id + '/settings']"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Settings</a
                >

                <a
                  *ngIf="showCommissionsLink()"
                  [routerLink]="['/commissions']"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Sales Commissions</a
                >

                <a
                  *ngIf="showLegalEntitiesLink()"
                  [routerLink]="['/legal_entities']"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Legal entities</a
                >

                <a
                  *ngIf="showTemplatesLink()"
                  [routerLink]="['/' + company.id + '/settings/templates']"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Templates</a
                >

                <a
                  (click)="logout()"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer"
                  >Log out
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="-mr-2 flex md:hidden">
        <!-- Mobile menu button -->
        <button
          (click)="isMenuExpanded = !isMenuExpanded"
          class="inline-flex items-center justify-center p-2 rounded-md text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:bg-indigo-600 focus:text-white">
          <!-- Menu open: "hidden", Menu closed: "block" -->
          <svg
            [ngClass]="isMenuExpanded ? 'hidden' : 'block'"
            class="h-6 w-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24">
            <path
              d="M4 6h16M4 12h16M4 18h16"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2" />
          </svg>
          <!-- Menu open: "block", Menu closed: "hidden" -->
          <svg
            [ngClass]="isMenuExpanded ? 'block' : 'hidden'"
            class="h-6 w-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24">
            <path
              d="M6 18L18 6M6 6l12 12"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!--
    Mobile menu, toggle classes based on menu state.

    Open: "block", closed: "hidden"
  -->
  <div [ngClass]="isMenuExpanded ? 'block' : 'hidden'" class="md:hidden">
    <div class="px-2 pt-2 pb-3 sm:px-3">
      <a
        [routerLinkActive]="'active-link'"
        [routerLink]="'dashboard'"
        class="text-base link"
        >Dashboard
      </a>
      <a
        *ngIf="company?.id !== 'all'"
        [routerLinkActive]="'active-link'"
        [routerLink]="'/' + company.id + '/projects'"
        class="mt-1 text-base link"
        >Projects
      </a>
    </div>

    <ng-container *ngIf="company?.id !== 'all'">
      <!-- Business -->
      <div class="px-2 pt-2 pb-3 sm:px-3 border-t border-indigo-800">
        <label class="mt-1 px-3 py-3 font-bold text-indigo-400">Business</label>
        <a
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/quotes'"
          class="mt-1 text-base link ml-3"
          >Quotes
        </a>

        <a
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/orders'"
          class="mt-1 text-base link ml-3"
          >Orders</a
        >

        <a
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/invoices'"
          class="mt-1 text-base link ml-3"
          >Invoices</a
        >

        <a
          *ngIf="userRole !== 3"
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/purchase_orders'"
          class="mt-1 text-base link ml-3"
          >Purchase Orders</a
        >

        <a
          *ngIf="userRole !== 5"
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/resource_invoices'"
          class="mt-1 text-base link ml-3"
          >Resource Invoices</a
        >
      </div>

      <!-- Contacts -->
      <div class="px-2 pt-2 pb-3 sm:px-3 border-t border-indigo-800">
        <label class="mt-1 px-2 py-3 font-bold text-indigo-400">Contacts</label>

        <a
          *ngIf="userRole !== 4"
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/customers'"
          class="mt-1 text-base link ml-3"
          >Customers</a
        >

        <a
          *ngIf="userRole !== 4"
          [routerLinkActive]="'active-link'"
          [routerLink]="['/' + company.id + '/contacts']"
          class="mt-1 text-base link ml-3"
          >Contacts</a
        >

        <a
          *ngIf="userRole !== 3"
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/resources'"
          class="mt-1 text-base link ml-3"
          >Resources</a
        >

        <a
          *ngIf="userRole !== 3"
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/employees'"
          class="mt-1 text-base link ml-3"
          >Employees</a
        >
      </div>
    </ng-container>

    <div class="pt-4 pb-3 border-t border-indigo-800">
      <div class="flex items-center px-5">
        <div class="flex-shrink-0">
          <img [src]="companyAvatar" alt="" class="h-10 w-10 rounded-full" />
        </div>
        <div class="ml-3">
          <div class="text-base font-medium leading-none text-white">
            {{ user.first_name + ' ' + user.last_name }}
          </div>

          <div class="mt-1 text-sm font-medium leading-none text-indigo-300">
            {{ userRole | enumValue: 'userrole' }}
          </div>
        </div>
      </div>

      <div
        aria-labelledby="company-menu"
        aria-orientation="vertical"
        class="mt-3 px-2"
        role="menu">
        <!-- List of companies -->
        <ng-container *ngIf="user?.companies.length > 1">
          <label
            class="block px-3 py-2 rounded-md text-base font-bold text-indigo-400">
            Companies
          </label>

          <div class="border-b border-indigo-800 mb-2 pb-2">
            <a
              *ngFor="let comp of companies"
              class="block ml-3 px-3 py-2 rounded-md text-base font-medium text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:text-white focus:bg-indigo-600"
              [class.cursor-pointer]="comp.id !== company.id"
              [ngClass]="{ 'text-white bg-indigo-600': comp.id === company.id }"
              (click)="
                comp.id !== company.id ? updateCompany(comp) : undefined
              ">
              {{ comp.name }}
            </a>
          </div>
        </ng-container>

        <a
          *ngIf="showSettings"
          [routerLinkActive]="'active-link'"
          [routerLink]="'/' + company.id + '/settings'"
          class="block px-3 py-2 rounded-md text-base font-medium text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:text-white focus:bg-indigo-600"
          role="menuitem">
          Settings
        </a>

        <a
          *ngIf="showCommissionsLink()"
          [routerLink]="['/commissions']"
          class="block px-3 py-2 rounded-md text-base font-medium text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:text-white focus:bg-indigo-600">
          Sales Commissions
        </a>

        <a
          *ngIf="showLegalEntitiesLink()"
          [routerLink]="['/legal_entities']"
          class="block px-3 py-2 rounded-md text-base font-medium text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:text-white focus:bg-indigo-600">
          Legal entities
        </a>

        <a
          *ngIf="showTemplatesLink()"
          [routerLink]="['/' + company.id + '/settings/templates']"
          class="block px-3 py-2 rounded-md text-base font-medium text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:text-white focus:bg-indigo-600">
          Templates
        </a>

        <a
          (click)="logout()"
          class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-indigo-300 hover:text-white hover:bg-indigo-600 focus:outline-none focus:text-white focus:bg-indigo-600 cursor-pointer"
          role="menuitem">
          Log out
        </a>
      </div>
    </div>
  </div>
</nav>
